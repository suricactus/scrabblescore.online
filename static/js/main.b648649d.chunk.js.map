{"version":3,"sources":["logic/scoreLists.js","logic/util.js","components/GameSettings/GameSettings.js","logic/game.js","components/ScrabbleTile/ScrabbleTile.js","components/ScoreGrid/WordInTiles.js","components/ScoreGrid/ScoreGridCell.js","components/ScoreGrid/ScoreGrid.js","components/ScrabbleScoreKeeper/CallPlayerToAction.js","components/ScrabbleScoreKeeper/InGameControls.js","components/ScoreGrid/ScoreGridMobile.js","components/Tooltip/Tooltip.js","components/ScrabbleInputBox/ModifierTile.js","components/ScrabbleInputBox/WithModifierPopover.js","components/ScrabbleInputBox/ScrabbleInputBox.js","components/ScrabbleScoreKeeper/InGameOverControls.js","components/ScrabbleScoreKeeper/ScoreKeeper.js","components/ScrabbleScoreKeeper/App.js","serviceWorker.js","index.js"],"names":["scoreListsMap","en","language","scores","a","e","i","o","u","l","n","r","s","t","d","g","b","c","m","p","f","h","v","w","y","k","j","x","q","z","fr","ru","о","а","е","и","н","р","с","т","в","д","к","л","п","у","м","б","г","ь","я","ё","ы","й","з","ж","х","ц","ч","ш","э","ю","ф","щ","ъ","bg","resizeArray","array","desiredLength","defaultValue","output","slice","length","push","__toggleSingleModifier","oldModifiers","modifier","scrabbleScore","word","modifiers","result","split","forEach","letter","score","toLowerCase","isStaticBuild","navigator","userAgent","logEvent","eventName","eventData","amplitude","getInstance","error","console","log","scrollToTop","document","getElementsByTagName","scrollIntoView","scrollToMiddle","getElementsByClassName","block","persistState","stateObj","window","localStorage","setItem","JSON","stringify","getPersistedState","state","getItem","parse","clearPersistedState","removeItem","GameSettings","props","handleChangeOfName","bind","handleChangeOfLanguage","handleGameStart","numberOfPlayers","playerNames","isTagDisabled","this","setState","target","value","onGameStart","preventDefault","map","name","className","id","onChange","src","alt","Array","_","key","type","placeholder","disabled","onClick","React","Component","Turn","words","bingo","game","isEmpty","getCurrentTurn","obj","Game","playersTurns","currentPlayerIndex","leftOversTurnNumber","currentTurn","turn","_setTurn","getCurrentTurnNumber","newGame","empty","newPlayerIndex","history","playerIndex","isGameOver","move","reaperIndexes","total","Math","abs","reapers","totalLeftOverScore","reaperIndex","upToMove","totalScores","getTotalScore","indexesOf","max","turnNumber","playerCopy","player","getCurrentPlayer","totalScore","totals","getRunningTotals","undefined","fromPlain","ScrabbleTile","modifierClass","join","role","onKeyDown","toUpperCase","WordInTiles","letterTiles","ScoreGridCell","isMoveInGameOver","rows","rowSpan","colSpan","isPassed","renderPassed","renderNormal","ScoreGrid","numRows","align","CallPlayerToAction","noSleep","isMobile","playerName","callPlayerToAction","ScoreGridMobile","scope","moveRowText","areLeftOversSubmitted","isComplete","turnIndex","isCurrentPlayersTurn","Tooltip","children","tooltip","hideArrow","arrowRef","tooltipRef","getArrowProps","getTooltipProps","placement","ref","getTriggerProps","triggerRef","ModifierTile","onTouchEnd","tileText","WithModifierPopover","handleClick","handleVisibilityChange","tooltipShown","newModifiers","modifiersA","filter","mod","modifiersB","toggleModifiers","stopPropagation","argument","onVisibilityChange","trigger","portalContainer","ScrabbleInputBox","textHiddenInput","createRef","focus","handleHiddenInputChange","handleTileClick","inFocus","substring","isLetterAllowed","letterIndex","current","keyCode","handleArrowClick","onBlur","onFocus","maxLength","autoComplete","autoCapitalize","spellCheck","autoCorrect","handleModifierChange","emptyWord","includes","NoSleep","InGameControls","handleChange","handleUndo","handleEndTurn","handleEndGame","handleAddWord","handleBingo","_scroll","input","currentWord","where","enable","onSetGame","resetCurrentWord","onUndo","addWord","endTurn","setBingo","endGame","turns","undoDisabled","isCurrentWordEmpty","endTurnButtonText","isEndGameDisabled","getCurrentPlayerIndex","isBingoDisabled","some","isModifierChosen","isInstructionShown","isFirstTurn","isEndTurnDisabled","onSubmit","checked","htmlFor","InGameOverControls","handleLeftOvers","handleNewGame","onNewGame","distributeLeftOversToReapers","getReapers","getSumOfLeftovers","submitButtonText","ScoreKeeper","handleSetGame","renderWinner","restoredState","games","createNewGame","currentGame","newState","previousGames","turnBeforeLeftOvers","winners","getWinners","winnersTie","winnerIndex","controlProps","href","toDisplayCallPlayerToAction","App","handleWindowSizeChange","handlePopState","handleResetGame","width","pushState","addEventListener","ReactGA","initialize","pageview","location","pathname","search","constructor","maybeResumeGame","removeEventListener","event","innerWidth","renderGame","shouldResume","confirm","didResume","Boolean","hostname","match","init","rootElement","hasChildNodes","hydrate","render","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b648649d.chunk.js","sourcesContent":["export const scoreListsMap = {\n  en: {\n    language: 'English',\n    scores: {\n      a: 1,\n      e: 1,\n      i: 1,\n      o: 1,\n      u: 1,\n      l: 1,\n      n: 1,\n      r: 1,\n      s: 1,\n\t\t\tt: 1,\n      d: 2,\n      g: 2,\n      b: 3,\n      c: 3,\n      m: 3,\n      p: 3,\n      f: 4,\n      h: 4,\n      v: 4,\n      w: 4,\n      y: 4,\n\t\t\tk: 5,\n      j: 8,\n      x: 8,\n      q: 10,\n      z: 10,\n    },\n  },\n  fr: {\n    language: 'French',\n    scores: {\n      e: 1,\n      a: 1,\n      i: 1,\n      n: 1,\n      o: 1,\n      r: 1,\n      s: 1,\n      t: 1,\n      u: 1,\n      l: 1,\n\t\t\td: 2,\n      m: 2,\n      g: 2,\n      b: 3,\n      c: 3,\n      p: 3,\n      f: 4,\n      h: 4,\n      v: 4,\n      j: 8,\n      q: 8,\n      k: 10,\n\t\t\tw: 10,\n      x: 10,\n      y: 10,\n      z: 10,\n    },\n  },\n  ru: {\n    language: 'Russian',\n    scores: {\n      о: 1,\n      а: 1,\n      е: 1,\n      и: 1,\n      н: 1,\n      р: 1,\n      с: 1,\n      т: 1,\n      в: 1,\n\t\t\tд: 2,\n      к: 2,\n      л: 2,\n      п: 2,\n      у: 2,\n      м: 2,\n      б: 3,\n      г: 3,\n      ь: 3,\n      я: 3,\n      ё: 3,\n      ы: 4,\n      й: 4,\n\t\t\tз: 5,\n      ж: 5,\n      х: 5,\n      ц: 5,\n      ч: 5,\n      ш: 8,\n      э: 8,\n      ю: 8,\n      ф: 10,\n      щ: 10,\n      ъ: 10,\n    },\n  },\n  bg: {\n    language: 'Bulgarian',\n    scores: {\n      о: 1,\n      а: 1,\n      е: 1,\n      и: 1,\n      н: 1,\n      р: 1,\n      с: 1,\n      т: 1,\n      п: 1,\n      в: 2,\n      д: 2,\n      к: 2,\n      л: 2,\n      м: 2,\n      б: 2,\n      г: 3,\n      ъ: 3,\n      й: 4,\n      ж: 4,\n      у: 5,\n      з: 5,\n      х: 5,\n      я: 5,\n      ч: 5,\n      ш: 8,\n      ю: 8,\n      ц: 10,\n      щ: 10,\n      ф: 10,\n      ь: 10,\n    },\n  },\n};\n","import amplitude from 'amplitude-js';\nimport { scoreListsMap } from './scoreLists';\n\nexport function resizeArray(array, desiredLength, defaultValue) {\n  const output = array.slice(0, desiredLength);\n  while (output.length < desiredLength) output.push(defaultValue);\n  return output;\n}\n\nexport function indexesOf(array, value) {\n  const result = [];\n  for (let i = 0; i < array.length; i++) {\n    if (array[i] === value) {\n      result.push(i);\n    }\n  }\n  return result;\n}\n\nfunction __toggleSingleModifier(oldModifiers, modifier) {\n  if (oldModifiers.length === 0)\n    return [modifier];\n  return (oldModifiers[0] === modifier) ? [] : [modifier];\n}\n\nexport function toggleModifiers(oldModifiers, modifier) {\n  let modifiersA = oldModifiers.filter(mod => mod === 'blank');\n  let modifiersB = oldModifiers.filter(mod => mod !== 'blank');\n\n  if (modifier === 'blank')\n    modifiersA = __toggleSingleModifier(modifiersA, modifier);\n  else\n    modifiersB = __toggleSingleModifier(modifiersB, modifier);\n\n  return [...modifiersA, ...modifiersB];\n}\n\nexport function isLetterAllowed(letter, language) {\n  return letter.toLowerCase() in scoreListsMap[language].scores;\n}\n\nexport function scrabbleScore(word, modifiers, language) {\n  let result = 0;\n\n  word.split('').forEach((letter, i) => {\n    let score = scoreListsMap[language].scores[letter.toLowerCase()];\n    for (let j=0; j < modifiers[i].length; j++) {\n      // eslint-disable-next-line\n      switch (modifiers[i][j]) {\n        case 'blank': score *= 0; break;\n        case 'double-letter': score *= 2; break;\n        case 'triple-letter': score *= 3; break;\n      }\n    }\n    result += score;\n  })\n  \n  modifiers.forEach((modifier) => {\n    for (let j=0; j < modifier.length; j++) {\n    // eslint-disable-next-line\n      switch (modifier[j]) {\n        case 'double-word': result *= 2; break;\n        case 'triple-word': result *= 3; break;\n      }\n    }\n  });\n  return result;\n}\n\nexport function logEventInit() {\n  amplitude.getInstance().init('908142045794995ec39e6025a04bfdb4');\n}\n\nexport function isStaticBuild() {\n  return navigator.userAgent === 'ReactSnap';\n}\n\nexport function isCordova() {\n  return navigator.userAgent.includes(\"cordova\");\n}\n\nexport function isProduction() {\n  return process.env.NODE_ENV === 'production'; // eslint-disable-line no-use-before-define\n}\n\nexport function isTest() {\n  return process.env.NODE_ENV === 'test';\n}\n\nexport function logEvent(eventName, eventData) {\n  if (isStaticBuild() || !isProduction())\n    return;\n\n  try {\n    amplitude.getInstance().logEvent(eventName, eventData)\n  } catch(error) {\n    console.log(`Something went wrong when logging an event. ${error}.`)\n  }\n}\n\nexport function scrollToTop() {\n  const bodyElement = document.getElementsByTagName('body');\n  bodyElement[0].scrollIntoView(true)\n}\n\nexport function scrollToMiddle() {\n  const inputBoxElement = document.getElementsByClassName('middle-scroll-anchor');\n  inputBoxElement[0].scrollIntoView({ block: 'center' })\n}\n\nexport function persistState(stateObj) {\n  window.localStorage.setItem('ScrabbleState', JSON.stringify(stateObj));\n}\n\nexport function getPersistedState() {\n  const state = window.localStorage.getItem('ScrabbleState');\n  return state ? JSON.parse(state) : null;\n}\n\nexport function clearPersistedState() {\n  window.localStorage.removeItem('ScrabbleState');\n}\n\nexport default null;\n","import React from 'react';\nimport './GameSettings.css';\nimport { logEvent, isStaticBuild } from '../../logic/util';\n\n\nclass GameSettings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChangeOfName = this.handleChangeOfName.bind(this);\n    this.handleChangeOfLanguage = this.handleChangeOfLanguage.bind(this);\n    this.handleGameStart = this.handleGameStart.bind(this);\n\n    this.state = {\n      numberOfPlayers: 4,\n      playerNames: ['', ''],\n      language: 'bg',\n      isTagDisabled: true,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({isTagDisabled: isStaticBuild()});\n  }\n\n  handleChangeOfName(i, e) {\n    let { playerNames } = this.state;\n    playerNames = playerNames.slice();\n    playerNames[i] = e.target.value;\n    this.setState({ playerNames });\n  }\n\n  handleChangeOfLanguage(e) {\n    this.setState({ language: e.target.value });\n  }\n\n  handleGameStart(e) {\n    const { playerNames, language } = this.state;\n    const { onGameStart } = this.props;\n    e.preventDefault(); /* prevent form submission */\n    onGameStart(playerNames.map((name, i) => (name || `Player ${i + 1}`)), language);\n\n    logEvent('start-game', {playerNames: playerNames, language: language});\n  }\n\n  render() {\n    const { language, numberOfPlayers, playerNames, isTagDisabled } = this.state;\n    return (\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-sm-2 offset-sm-10\">\n            <select className=\"custom-select\" id=\"language-select\" value={language} onChange={this.handleChangeOfLanguage}>\n              <option value=\"bg\">Bulgarian</option>\n              <option value=\"en\">English</option>\n              <option value=\"ru\">Russian</option>\n              <option value=\"fr\">French</option>\n            </select>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-sm-12\">\n            <img id=\"big-logo\" src=\"logo.png\" alt=\"Scrabble score logo\"/>\n            <span className=\"description\">\n              <p>\n                 Hello and welcome to Scrabble Score Online. This is an easy-to-use\n                 scrabble score calculator that replaces pen-and-paper for keeping track of Scrabble scores.\n                 Enjoy the game with your friends and family while this scrabble score sheet will do math for you.\n              </p>\n              <p>\n                 Simply fill in the players’ names in order that they will\n                 take turns and press the “START” button.\n              </p>\n              <p>Relax and enjoy your game, now you don’t need to do any math!</p>\n            </span>\n          </div>\n        </div>\n        <form>\n          <div className=\"player-names-choice-container\">\n            <div className=\"container\">\n              <div className=\"row\">\n                <div className=\"col-12\">\n                  {[...Array(numberOfPlayers)].map((_, i) => (\n                    <input\n                      onChange={e => this.handleChangeOfName(i, e)}\n                      id={`player-name-input-${i}`}\n                      key={i}\n                      type=\"text\"\n                      className={playerNames[i] && playerNames[i].length > 0 ? 'form-control player-name filled' : 'form-control player-name'}\n                      placeholder={`Player ${i + 1}`}\n                      disabled={isTagDisabled}\n                    />\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"start-btn-container\">\n            <button className=\"btn start\" type=\"button\" onClick={this.handleGameStart} disabled={isTagDisabled}>START</button>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\n\nexport default GameSettings;\n","import { resizeArray, indexesOf } from './util';\n\nclass Turn {\n  /* DONE Add test for passed display in the scoregrid */\n  /* DONE once test are added, refactor to take out the passed variable from Turn */\n  constructor(words, bingo) {\n    this.words = words;\n    this.bingo = bingo;\n  }\n\n  static empty() {\n    return new Turn([], false);\n  }\n\n  static fromPlain(obj) {\n    return new Turn(obj.words, obj.bingo)\n  }\n\n  isEmpty() {\n    return this.words.length === 0;\n  }\n\n  isPassed(game) {\n    return this.isEmpty() && this !== game.getCurrentTurn();\n  }\n\n  isComplete(game) {\n    return this !== game.getCurrentTurn()\n  }\n\n  get score() {\n    let result = 0;\n    for (let i = 0; i < this.words.length; i++) {\n      result += this.words[i].score;\n    }\n\n    if (this.bingo) {\n      result += 50;\n    }\n\n    return result;\n  }\n}\n\nexport default class Game {\n  constructor(playersTurns, currentPlayerIndex, leftOversTurnNumber) {\n    this.currentPlayerIndex = currentPlayerIndex;\n    this.playersTurns = playersTurns;\n    this.leftOversTurnNumber = leftOversTurnNumber;\n  }\n\n  static createNewGame(numberOfPlayers) {\n    const turn = Turn.empty();\n    const playersTurns = resizeArray([[turn]], numberOfPlayers, []);\n    return new Game(playersTurns, 0, null);\n  }\n\n  static fromPlain(obj) {\n    const turns = obj.playersTurns.map(player => player.map(turn => Turn.fromPlain(turn)));\n    return new Game(turns, obj.currentPlayerIndex, obj.leftOversTurnNumber);\n  }\n\n  addWord(word) {\n    const currentTurn = this.getCurrentTurn();\n    const turn = new Turn([...currentTurn.words, word], currentTurn.bingo);\n    return this._setTurn(this.currentPlayerIndex, this.getCurrentTurnNumber(), turn);\n  }\n\n  endTurn() {\n    let newGame = this;\n    if (this.getCurrentTurn().isEmpty()) {\n      newGame = this._setTurn(this.currentPlayerIndex, this.getCurrentTurnNumber(), Turn.empty());\n    }\n    const newPlayerIndex = (this.currentPlayerIndex + 1) % this.playersTurns.length;\n    const players = newGame.playersTurns.map((history, playerIndex) => (playerIndex === newPlayerIndex ? [...history, Turn.empty()] : history));\n    return new Game(players, newPlayerIndex, this.leftOversTurnNumber);\n  }\n\n  setBingo(value) {\n    const turn = new Turn(this.getCurrentTurn().words, value);\n    return this._setTurn(this.currentPlayerIndex, this.getCurrentTurnNumber(), turn);\n  }\n\n  endGame() {\n    return new Game(this.playersTurns, this.currentPlayerIndex, this.getCurrentTurnNumber());\n  }\n\n  isGameOver() {\n    return this.leftOversTurnNumber !== null;\n  }\n\n  areLeftOversSubmitted() {\n    if (this.isGameOver() && this.playersTurns[this.playersTurns.length - 1][this.leftOversTurnNumber] && this.currentPlayerIndex === 0) {\n      return true;\n    }\n    return false;\n  }\n\n  isMoveInGameOver(move) {\n    return this.isGameOver() && move >= this.leftOversTurnNumber;\n  }\n\n  getReapers() {\n    const reaperIndexes = [];\n    for (let i = 0; i < this.playersTurns.length; i++) {\n      if (this.playersTurns[i][this.leftOversTurnNumber].isEmpty()) {\n        reaperIndexes.push(i);\n      }\n    }\n    return reaperIndexes;\n  }\n\n  getSumOfLeftovers() {\n    let total = 0;\n    for (let i = 0; i < this.playersTurns.length; i++) {\n      total += Math.abs(this.playersTurns[i][this.leftOversTurnNumber].score);\n    }\n    return total;\n  }\n\n  distributeLeftOversToReapers(reapers, totalLeftOverScore) {\n    let game = this;\n    reapers.forEach((reaperIndex) => {\n      const turn = new Turn([{ value: '__reaped_leftovers__', modifiers: [], score: totalLeftOverScore}], false);\n      game = game._setTurn(reaperIndex, this.leftOversTurnNumber, turn);\n    });\n    return game;\n  }\n\n  getWinners(upToMove) {\n    const totalScores = this.playersTurns.map((_, i) => this.getTotalScore(i, upToMove));\n    return indexesOf(totalScores, Math.max(...totalScores));\n  }\n\n  _setTurn(playerIndex, turnNumber, turn) {\n    const playerCopy = this.playersTurns[playerIndex].slice();\n    playerCopy[turnNumber] = turn;\n    const newPlayers = this.playersTurns.map((player, i) => (i === playerIndex ? playerCopy : player));\n    return new Game(newPlayers, this.currentPlayerIndex, this.leftOversTurnNumber);\n  }\n\n  getCurrentPlayer() {\n    return this.playersTurns[this.currentPlayerIndex];\n  }\n\n  getCurrentTurn() {\n    return this.getCurrentPlayer().slice(-1)[0];\n  }\n\n  getCurrentTurnNumber() {\n    return this.playersTurns[0].length - 1;\n  }\n\n  getCurrentPlayerIndex() {\n    return this.currentPlayerIndex;\n  }\n\n  getRunningTotals(playerIndex) {\n    const player = this.playersTurns[playerIndex];\n    let result = [];\n    let totalScore = 0;\n    for (let i = 0; i < player.length; i++) {\n      totalScore += player[i].score\n      result.push(totalScore);\n    }\n    return result;\n  }\n  \n  getTotalScore(playerIndex, upToMove) {\n    let totals = this.getRunningTotals(playerIndex);\n    if (upToMove !== undefined)\n      return totals[upToMove];\n    return totals.length === 0 ? 0 : totals[totals.length - 1];\n  }\n}\n","import React from 'react';\nimport './ScrabbleTile.css';\n\nfunction ScrabbleTile(props) {\n  const {\n    modifier, letter, score, onClick,\n  } = props;\n  const modifierClass = modifier === [] ? '' : modifier.join(' ');\n  return (\n    <span className={`scrabble-letter ${modifierClass}`} role=\"button\" onClick={onClick} onKeyDown={onClick}>\n      {modifier.length !== 0\n        ? <span className=\"tile-modifier\"></span>\n        : null\n      }\n      <span className=\"letter\">{letter.toUpperCase()}</span>\n      <span className=\"score\">{score}</span>\n    </span>\n  );\n}\nexport default ScrabbleTile;\n","import React from 'react';\nimport { scrabbleScore } from '../../logic/util';\nimport ScrabbleTile from '../ScrabbleTile/ScrabbleTile';\n\nclass WordInTiles extends React.Component {\n  render() {\n    const { word, language } = this.props;\n    if (word.value === '__reaped_leftovers__') {\n      return <span className='reaper'>NO LEFTOVERS</span>\n    } \n    const letterTiles = word.value.split('').map((letter, i) => {\n      const tile = (\n        <ScrabbleTile\n          key={i}\n          letter={letter}\n          modifier={word.modifiers[i]}\n          score={scrabbleScore(letter, [[]], language)}\n        />\n      );\n      return tile;\n    });\n    return <div>{letterTiles}</div>;\n  }\n}\n\nexport default WordInTiles;\n","import React from 'react';\nimport WordInTiles from './WordInTiles';\n\nclass ScoreGridCell extends React.Component {\n  renderPassed() {\n    const { game, move } = this.props;\n    return (\n       <tr>\n        <td>\n          { game.isMoveInGameOver(move) ? 'NO LEFTOVERS' : 'PASS' }\n        </td>\n      </tr> \n    )\n  }\n\n  renderNormal() {\n    const { turn, language } = this.props;\n    const rows = turn.words.map((word, i) => (\n\n      <tr key={`row-word-${i}`} className=\"word-row\">\n        <td className=\"word-cell\"><WordInTiles word={word} language={language} /></td>\n        {i === 0\n          ? (\n            <td rowSpan={`${turn.bingo ? turn.words.length + 1 : turn.words.length}`} className=\"score-cell\">\n              <span className=\"score-box\">\n                {turn.score}\n              </span>\n            </td>\n          )\n          : null}\n      </tr>\n    ));\n\n    if (turn.bingo) {\n      rows.push(\n        <tr key=\"bingo\">\n          <td colSpan=\"2\">BINGO!</td>\n        </tr>,\n      );\n    }\n    return rows;\n  }\n\n  render() {\n    const { turn, game } = this.props;\n    return (\n      <table className=\"score-grid-cell\">\n        <tbody>\n          {turn.isPassed(game) ? this.renderPassed() : this.renderNormal()}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nexport default ScoreGridCell;\n","import React from 'react';\nimport ScoreGridCell from './ScoreGridCell';\nimport './ScoreGrid.css';\n\nfunction ScoreGrid(props) {\n  const { playerNames, game, language } = props;\n  const getTurnClass = (turn, currentTurn) => (\n    turn === currentTurn ? 'player-turn active' : 'player-turn'\n  );\n  const numRows = game.isGameOver() ? game.leftOversTurnNumber + 1 : game.getCurrentTurnNumber() + 1;\n\n  return (\n    <table className=\"table table-bordered score-grid-table\" align=\"center\">\n      <thead>\n        <tr className=\"thead-rows\">\n          <th className=\"move-header\">Move</th>\n          {playerNames.map((player, i) => (\n            <th\n              key={i}\n              className=\"player-header\"\n            >\n              {player}\n            </th>\n          ))}\n        </tr>\n      </thead>\n      <tbody className=\"tbody-rows\">\n        {[...Array(numRows)].map((_, i) => (\n          <tr className=\"turn-row\" key={i}>\n            <th className=\"move-number\">{i + 1}</th>\n            {game.playersTurns.map((player, j) => (\n              <td key={j} className={getTurnClass(player[i], game.getCurrentTurn())}>\n                {player[i] ? <ScoreGridCell turn={player[i]} move={i} language={language} game={game} />\n                  : null}\n              </td>\n            ))}\n          </tr>\n        ))}\n        <tr className=\"total-score\">\n          <th className=\"move\">TOTAL</th>\n          {playerNames.map((_, i) => <td key={i}>{game.getTotalScore(i)}</td>)}\n        </tr>\n      </tbody>\n    </table>\n  );\n}\n\nexport default ScoreGrid;\n","import React from 'react';\n\nfunction CallPlayerToAction(props) {\n  const { isMobile, game, playerNames } = props;\n  \n  function callPlayerToAction() {\n    const playerName = playerNames[game.currentPlayerIndex];\n    const msgs = {\n      'mobile-ingame':    `Submit a word or end turn`,\n      'mobile-gameover':  `Submit your leftovers`,\n      'desktop-ingame':   `${playerName}, submit a word or end turn`,\n      'desktop-gameover': `${playerName}, submit your leftovers`,\n    };\n    return msgs[`${isMobile ? 'mobile' : 'desktop'}-${game.isGameOver() ? 'gameover':'ingame'}`];\n  }\n\n  return (\n    <div className=\"row justify-content-center\">\n      <span className=\"call-player-to-action\">{callPlayerToAction()}</span>\n    </div>\n  );\n}\n\nexport default CallPlayerToAction;\n","import React from 'react';\nimport { scrabbleScore, logEvent, scrollToTop,  scrollToMiddle, isTest, isCordova } from '../../logic/util';\nimport ScrabbleInputBox from '../ScrabbleInputBox/ScrabbleInputBox';\nimport NoSleep from 'nosleep.js';\n\nconst emptyWord = { value: '', modifiers: [], score: 0 };\nlet noSleep;\nif (!isTest() && !isCordova()) {\n  noSleep = new NoSleep();\n}\n\nclass InGameControls extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleUndo = this.handleUndo.bind(this);\n    this.handleEndTurn = this.handleEndTurn.bind(this);\n    this.handleEndGame = this.handleEndGame.bind(this);\n    this.handleAddWord = this.handleAddWord.bind(this);\n    this.handleBingo = this.handleBingo.bind(this);\n    this._scroll = this._scroll.bind(this);\n    this.input = React.createRef();\n    this.state = {\n      currentWord: emptyWord,\n    };\n  }\n\n  _scroll(where='middle') {\n    const { isMobile } = this.props;\n\n    if (typeof noSleep !== \"undefined\") {\n      /*\n       * NoSleep requires to be called from an event handler\n       * So ideally we would want to put it into the Start Game event handler\n       * But if we put noSleep into the Start game event, noSleep won't be called when the user resumes game\n       * Thus, we locate it in scroll function, which is beeing executed when user interacts with buttons\n       */\n\n      noSleep.enable();\n    }\n    \n    if (!isMobile)\n      return;\n\n    if (where === 'middle')\n      scrollToMiddle();\n    else\n      scrollToTop();\n  }\n\n  componentDidMount() {\n    const { game } = this.props;\n\n    if (this.input.current)\n      this.input.current.focus();\n    if (game.getCurrentTurnNumber() === 0)\n      this._scroll('top');\n  }\n\n  onSetGame(game) {\n    const { onSetGame } = this.props;\n    onSetGame(game);\n    this.resetCurrentWord();\n  }\n\n  resetCurrentWord() {\n    this.setState({ currentWord: emptyWord });\n    if (this.input.current)\n      this.input.current.focus();\n  }\n\n  handleChange(word) {\n    const { language } = this.props;\n    const currentWord = { ...word, score: scrabbleScore(word.value, word.modifiers, language) };\n    this.setState({ currentWord });\n  }\n\n  handleUndo() {\n    const { onUndo } = this.props;\n    onUndo();\n    this.resetCurrentWord();\n\n    logEvent('undo');\n  }\n\n  handleAddWord() {\n    const { currentWord } = this.state;\n    const { game } = this.props;\n    this.onSetGame(game.addWord(currentWord));\n    this._scroll();\n\n    logEvent('add-word', {'word': currentWord});\n  }\n\n  handleEndTurn(e) {\n    const { currentWord } = this.state;\n    let { game } = this.props;\n    if (currentWord.value.length !== 0)\n      game = game.addWord(currentWord);\n    this.onSetGame(game.endTurn());\n    this._scroll();\n\n    const data = currentWord.value.length !== 0\n                        ? {'word': currentWord}\n                        : {};\n    logEvent('end-turn', data);\n  }\n\n  handleBingo() {\n    const { game, onSetGame } = this.props;\n    onSetGame(game.setBingo(!game.getCurrentTurn().bingo));\n    this._scroll();\n    this.input.current.focus();\n\n    logEvent('toggle-bingo');\n  }\n\n  handleEndGame() {\n    const { game, onSetGame } = this.props;\n    onSetGame(game.endGame());\n    this._scroll();\n\n    logEvent('end-game', {'num-of-turns': game.playersTurns.length,\n                          'game-turns': game.playersTurns.map((turns) => ({turns: turns}))});\n  }\n\n  render() {\n    const { currentWord } = this.state;\n    const { game, language, undoDisabled } = this.props;\n    const isCurrentWordEmpty = game.getCurrentTurn().isEmpty() && currentWord.value === ''\n    const endTurnButtonText = isCurrentWordEmpty ? 'PASS' : 'END TURN';\n    const isEndGameDisabled = game.currentPlayerIndex !== 0 || currentWord.value !== '' || game.getCurrentTurn().score > 0 || game.playersTurns[game.getCurrentPlayerIndex()].length === 1;\n    const isBingoDisabled = ![...game.getCurrentTurn().words, currentWord].some( word => word.value.length >= 7 )\n\n    const isModifierChosen = currentWord.modifiers.some(modifier => modifier.length !== 0);\n    const isInstructionShown = game.getCurrentTurnNumber() === 0 && game.getCurrentPlayerIndex() === 0 && !isModifierChosen && currentWord.value !== ''\n    const isFirstTurn = game.getCurrentTurnNumber() === 0 && game.getCurrentPlayerIndex() === 0\n    const isEndTurnDisabled = !isModifierChosen && !isCurrentWordEmpty && isFirstTurn;\n    const props = {\n      ref: this.input,\n      onChange: this.handleChange,\n      word: currentWord,\n      language,\n    };\n\n    return (\n      <form className={isFirstTurn ? 'first-turn' : null} onSubmit={(e) => e.preventDefault()} >\n        <ScrabbleInputBox {...props} />\n        <div className={`instruction-message ${isInstructionShown ? \"\" : \"hide\"}`}> \n          Click on the tile that is on the double word prime square\n        </div>\n\n        <div className=\"buttons\">\n         <div className=\"row\">\n            <div className=\"col\">\n              <button onClick={this.handleEndTurn} type=\"submit\" className=\"btn\" disabled={isEndTurnDisabled}>{endTurnButtonText}</button>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col\">\n              <button onClick={this.handleAddWord} type=\"button\" className=\"btn middle-scroll-anchor\" disabled={currentWord.value === '' || isFirstTurn}>+ ADD A WORD</button>\n            </div>\n            <div className=\"col\">\n              <input onChange={this.handleBingo} type=\"checkbox\" id=\"bingoToggle\" checked={game.getCurrentTurn().bingo} disabled={isBingoDisabled}/>\n              <label className={`btn bingo ${isBingoDisabled ? \"disabled\" : \"\"}`} htmlFor=\"bingoToggle\">\n                BINGO\n              </label>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col\">\n              <button onClick={this.handleUndo} type=\"button\" className=\"btn\" disabled={undoDisabled}>UNDO</button>\n            </div>\n            <div className=\"col\">\n              <button onClick={this.handleEndGame} type=\"button\" className=\"btn\" disabled={isEndGameDisabled}>END GAME</button>\n            </div>\n          </div>\n        </div>\n      </form>\n    );\n  }\n}\nexport default InGameControls;\n","import React from 'react';\nimport ScoreGridCell from './ScoreGridCell';\nimport CallPlayerToAction from '../ScrabbleScoreKeeper/CallPlayerToAction';\nimport './ScoreGrid.css';\n\nclass ScoreGridMobile extends React.Component {\n  moveRowText(i) {\n    const { game } = this.props;\n    return game.isMoveInGameOver(i) ? 'Leftovers Accounting' : `Move ${i + 1}`;\n  }\n\n  render() {\n    const { playerNames, game, language } = this.props;\n    const totalScores = [...Array(playerNames.length)].map((_, j) => game.getRunningTotals(j));\n    const toDisplayTotals = (turn) => {\n      if (!game.areLeftOversSubmitted()) {\n        return turn.isComplete(game);\n      }\n      return true;\n    };\n    const numRows = game.isGameOver() ? game.leftOversTurnNumber + 1 : game.getCurrentTurnNumber() + 1;\n\n    const isCurrentPlayersTurn = (player, turnIndex) => player === game.getCurrentPlayer()\n                                                      && player[turnIndex].isEmpty()\n                                                      && !player[turnIndex].isPassed(game)\n                                                      && !player[turnIndex].bingo;\n    return (\n      <table className=\"table table-bordered score-grid-table\">\n        <thead>\n          <tr className=\"thead-rows\">\n            <th className=\"playerNames\" scope=\"col\">Names<br />(Total)</th>\n            <th className=\"playerTurn\" scope=\"col\">Player Turn</th>\n          </tr>\n        </thead>\n        <tbody key=\"tbody\" className=\"tbody-rows\">\n          {[...Array(numRows)].map((_, i) => {\n            const moveRow = (\n              <tr key={`moverow${i}`} className=\"move-row\">\n                <td colSpan=\"2\">\n                  {this.moveRowText(i)}\n                </td>\n              </tr>\n            );\n            const playerRows = game.playersTurns.map((player, j) => (\n              player[i]\n                ? (\n                  <tr key={`move${i}_player${j}`} className=\"player-move-row\">\n                    <td className=\"player-name\">\n                      {playerNames[j]}\n                      <br />\n                      {toDisplayTotals(player[i]) ? totalScores[j][i] : null}\n                    </td>\n\n                    <td className=\"player-turn\">\n                      {isCurrentPlayersTurn(player, i)\n                        ? <table className=\"score-grid-cell\"><tbody><tr><td>\n                            <CallPlayerToAction game={game} playerNames={playerNames} isMobile />\n                          </td></tr></tbody></table>\n                        : <ScoreGridCell turn={player[i]} move={i} language={language} game={game} />\n                      }\n\n                    </td>\n                  </tr>\n                )\n                : null\n            ));\n            return [moveRow, playerRows];\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\nexport default ScoreGridMobile;\n","import React from 'react';\nimport TooltipTrigger from 'react-popper-tooltip';\nimport 'react-popper-tooltip/dist/styles.css';\nimport './Tooltip.css';\n\nconst Tooltip = ({\n  children, tooltip, hideArrow, ...props\n}) => (\n  <TooltipTrigger\n    {...props}\n    tooltip={({\n      arrowRef,\n      tooltipRef,\n      getArrowProps,\n      getTooltipProps,\n      placement,\n\n    }) => (\n      <div\n        {...getTooltipProps({\n          ref: tooltipRef,\n          className: 'tooltip-container',\n        })}\n      >\n        {!hideArrow && (\n          <div\n            {...getArrowProps({\n              ref: arrowRef,\n              className: 'tooltip-arrow',\n              'data-placement': placement,\n            })}\n          />\n        )}\n        {tooltip}\n      </div>\n    )}\n  >\n    {({ getTriggerProps, triggerRef }) => (\n      <span\n        {...getTriggerProps({\n          ref: triggerRef,\n          className: 'trigger',\n        })}\n      >\n        {children}\n      </span>\n    )}\n  </TooltipTrigger>\n);\n\nexport default Tooltip;\n","import React from 'react';\n\nclass ModifierTile extends React.Component {\n  tileText() {\n    const { modifier } = this.props;\n    switch (modifier) {\n      case 'double-letter': return 'Double letter score';\n      case 'double-word': return 'Double word score';\n      case 'triple-letter': return 'Triple letter score';\n      case 'triple-word': return 'Triple word score';\n      case 'blank': return 'Blank tile';\n      default: return null;\n    }\n  }\n\n  render() {\n    const { onClick, modifier } = this.props;\n    return (\n      <span\n        role=\"button\"\n        onClick={e => onClick(modifier, e)}\n        onKeyDown={e => onClick(modifier, e)}\n        onTouchEnd={e => onClick(modifier, e)}\n        className={`modifier ${modifier}`}\n      >\n        {this.tileText()}\n      </span>\n    );\n  }\n}\n\nexport default ModifierTile;\n","import React from 'react';\nimport Tooltip from '../Tooltip/Tooltip';\nimport ModifierTile from './ModifierTile';\nimport { toggleModifiers } from '../../logic/util';\n\nclass WithModifierPopover extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n    this.state = {\n      modifiers: [],\n      tooltipShown: false,\n    };\n  }\n\n  handleClick(modifier, e) {\n    const { modifiers } = this.state;\n    const { onChange } = this.props;\n    const newModifiers = toggleModifiers(modifiers, modifier);\n    this.setState({ modifiers: newModifiers, tooltipShown: false });\n    onChange(newModifiers);\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  handleVisibilityChange(argument) {\n    this.setState({ tooltipShown: argument });\n  }\n\n  render() {\n    const { tooltipShown } = this.state;\n    const { children } = this.props;\n    return (\n      <Tooltip\n        onVisibilityChange={this.handleVisibilityChange}\n        tooltipShown={tooltipShown}\n        placement=\"bottom\"\n        trigger=\"click\"\n        portalContainer={document.getElementsByClassName('scrabble-input-box')[0]}\n        tooltip={(\n          <div className=\"modifier-buttons\">\n            <ModifierTile modifier=\"double-letter\" onClick={this.handleClick} />\n            <ModifierTile modifier=\"double-word\" onClick={this.handleClick} />\n            <ModifierTile modifier=\"triple-letter\" onClick={this.handleClick} />\n            <ModifierTile modifier=\"triple-word\" onClick={this.handleClick} />\n            <ModifierTile modifier=\"blank\" onClick={this.handleClick} />\n          </div>\n        )}\n      >\n        {children}\n      </Tooltip>\n    );\n  }\n}\n\nexport default WithModifierPopover;\n","import React from 'react';\nimport { resizeArray, scrabbleScore, isLetterAllowed, logEvent } from '../../logic/util';\nimport WithModifierPopover from './WithModifierPopover';\nimport ScrabbleTile from '../ScrabbleTile/ScrabbleTile';\nimport './ScrabbleInputBox.css';\n\nclass ScrabbleInputBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.textHiddenInput = React.createRef();\n    this.focus = this.focus.bind(this);\n    this.handleHiddenInputChange = this.handleHiddenInputChange.bind(this);\n    this.handleTileClick = this.handleTileClick.bind(this);\n    this.state = {\n      inFocus: false,\n    };\n  }\n\n  handleHiddenInputChange(e) {\n    const { language, word, onChange } = this.props;\n    const input = e.target.value.substring(0,15); /* maxLength does not always work on Android */\n    const result = input.split('').map(letter => (isLetterAllowed(letter, language) ? letter : ''));\n    const modifiers = resizeArray(word.modifiers, result.length, []);\n    onChange({ value: result.join(''), modifiers });\n  }\n\n  handleModifierChange(letterIndex, modifier) {\n    const { word, onChange } = this.props;\n    const modifiers = word.modifiers.slice();\n    modifiers[letterIndex] = modifier;\n    onChange({ value: word.value, modifiers });\n\n    logEvent('modifier-added', {value: word.value, modifiers});\n  }\n\n  handleTileClick() {\n    this.focus();\n  }\n\n  focus() {\n    this.textHiddenInput.current.focus();\n  }\n\n  render() {\n    const { language, word } = this.props;\n    const { inFocus } = this.state;\n\n    function handleArrowClick(e) {\n      if (e.keyCode === 37 || e.keyCode === 38 || e.keyCode === 39 || e.keyCode === 40) {\n        e.preventDefault()\n      }\n    }\n\n    return (\n      <div role=\"textbox\" onClick={this.focus} onKeyDown={this.focus} className={`scrabble-input-box${word.value.length > 8 ? ' large' : ''}`}>\n        <input\n          ref={this.textHiddenInput}\n          onChange={this.handleHiddenInputChange}\n          onKeyDown={(e) => handleArrowClick(e)}\n          value={word.value}\n          className=\"hidden-input\"\n          onBlur={() => this.setState({ inFocus: false })}\n          onFocus={() => this.setState({ inFocus: true })}\n          type=\"text\"\n          maxLength=\"15\"\n          autoComplete=\"off\"\n          autoCapitalize=\"off\"\n          spellCheck=\"false\"\n          autoCorrect=\"off\"\n        />\n        <div className={inFocus ? 'scrabble-tiles blinker' : 'scrabble-tiles'}>\n          {word.value.split('').map((letter, letterIndex) => (\n            <WithModifierPopover\n              onChange={modifier => this.handleModifierChange(letterIndex, modifier)}\n              key={letterIndex}\n            >\n              <ScrabbleTile\n                onClick={this.handleTileClick}\n                letter={letter}\n                score={scrabbleScore(letter, [[]], language)}\n                modifier={word.modifiers[letterIndex]}\n              />\n            </WithModifierPopover>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\n\nexport default ScrabbleInputBox;\n","import React from 'react';\nimport { scrabbleScore, logEvent } from '../../logic/util';\nimport ScrabbleInputBox from '../ScrabbleInputBox/ScrabbleInputBox';\n\nconst emptyWord = { value: '', modifiers: [], score: 0 };\n\nclass InGameOverControls extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleUndo = this.handleUndo.bind(this);\n    this.handleLeftOvers = this.handleLeftOvers.bind(this);\n    this.handleNewGame = this.handleNewGame.bind(this);\n    this.input = React.createRef();\n    this.state = {\n      currentWord: emptyWord,\n    };\n  }\n\n  componentDidMount() {\n    if (this.input.current) this.input.current.focus();\n  }\n\n  resetCurrentWord() {\n    this.setState({ currentWord: emptyWord });\n    if (this.input.current) this.input.current.focus();\n  }\n\n  handleUndo() {\n    const { onUndo } = this.props;\n    onUndo();\n    this.resetCurrentWord();\n\n    logEvent('undo');\n  }\n\n  handleChange(word) {\n    const { language } = this.props;\n    const currentWord = { ...word, score: -scrabbleScore(word.value, word.modifiers, language) };\n    this.setState({ currentWord });\n  }\n\n  handleNewGame() {\n    const { onNewGame } = this.props;\n    onNewGame();\n    logEvent('new-game')\n  }\n\n  handleLeftOvers(e) {\n    const { currentWord } = this.state;\n    const { onSetGame } = this.props;\n    let { game } = this.props;\n\n    e.preventDefault(); /* prevent form submission */\n\n    if (currentWord.value.length !== 0)\n      game = game.addWord(currentWord);\n\n    game = game.endTurn();\n\n    if (game.currentPlayerIndex === 0)\n      game = game.distributeLeftOversToReapers(game.getReapers(), game.getSumOfLeftovers());\n\n    onSetGame(game);\n    this.resetCurrentWord();\n\n    const data = currentWord.value.length !== 0\n                    ? {'leftovers': currentWord}\n                    : {};\n    logEvent('submit-leftovers', data)\n  }\n\n  render() {\n    const { currentWord } = this.state;\n    const { game, language, undoDisabled } = this.props;\n    const submitButtonText = currentWord.value.length > 0 ? 'SUBMIT LEFTOVERS' : 'SUBMIT NO LEFTOVERS';\n    return (\n      <div>\n        {!game.areLeftOversSubmitted()\n          ? (\n            <form autoComplete=\"off\">\n              <ScrabbleInputBox\n                ref={this.input}\n                onChange={this.handleChange}\n                word={currentWord}\n                language={language}\n              />\n              <div className=\"buttons\">\n                <div className=\"row\">\n                  <div className=\"col\">\n                    <button onClick={this.handleLeftOvers} type=\"submit\" className=\"btn\">{submitButtonText}</button>\n                  </div>\n                </div>\n                <div className=\"row\">\n                  <div className=\"col\">\n                    <button onClick={this.handleUndo} type=\"button\" className=\"btn\" disabled={undoDisabled}>UNDO</button>\n                  </div>\n                </div>\n              </div>\n            </form>\n          )\n          : (\n            <div className=\"buttons\">\n              <div className=\"row\">\n                <div className=\"col\">\n                  <button onClick={this.handleNewGame} type=\"button\" className=\"btn\">NEW GAME</button>\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col\">\n                  <button onClick={this.handleUndo} type=\"button\" className=\"btn\" disabled={undoDisabled}>UNDO</button>\n                </div>\n              </div>\n            </div>\n          )\n        }\n      </div>\n    );\n  }\n}\n\nexport default InGameOverControls;\n","import React from 'react';\nimport Game from '../../logic/game';\nimport ScoreGrid from '../ScoreGrid/ScoreGrid';\nimport ScoreGridMobile from '../ScoreGrid/ScoreGridMobile';\nimport CallPlayerToAction from './CallPlayerToAction';\nimport InGameControls from './InGameControls';\nimport InGameOverControls from './InGameOverControls';\nimport { getPersistedState, persistState } from '../../logic/util';\n\nclass ScoreKeeper extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleUndo = this.handleUndo.bind(this);\n    this.handleSetGame = this.handleSetGame.bind(this);\n    this.renderWinner = this.renderWinner.bind(this);\n\n    const { playerNames } = this.props;\n    const restoredState = getPersistedState();\n    this.state = restoredState\n      ? {\n          game: Game.fromPlain(restoredState.game),\n          games: restoredState.games.map(Game.fromPlain),\n        }\n      : {\n          game: Game.createNewGame(playerNames.length),\n          games: [],\n        };\n  }\n\n  handleSetGame(currentGame) {\n    const { game, games } = this.state;\n    const { playerNames } = this.props;\n    const newState = {game: currentGame, games: [...games.slice(), game]};\n    this.setState(newState);\n    persistState({'playerNames': playerNames, ...newState});\n  }\n\n  handleUndo() {\n    const { games } = this.state;\n    const { playerNames } = this.props;\n    const previousGames = games.slice(0, -1);\n    const game = games[games.length - 1];\n    const newState = { game, games: previousGames };\n    this.setState(newState);\n    persistState({'playerNames': playerNames, ...newState});\n  }\n\n  renderWinner() {\n    const { game } = this.state;\n    const { playerNames } = this.props;\n    const turnBeforeLeftOvers = game.leftOversTurnNumber - 1;\n    const winners = game.getWinners();\n    if (winners.length > 1) {\n      const winnersTie = game.getWinners(turnBeforeLeftOvers);\n      return winnersTie.map(winnerIndex => (winnersTie.length > 1\n        ? `${playerNames[winnerIndex]}: ${game.getTotalScore(winnerIndex, turnBeforeLeftOvers)} points`\n        : `${playerNames[winnerIndex]} won with ${game.getTotalScore(winnerIndex, turnBeforeLeftOvers)} points!`)).join(', ');\n    }\n    return `${playerNames[winners[0]]} won with ${game.getTotalScore(winners[0])} points!`;\n  }\n\n  render() {\n    const { game, games } = this.state;\n    const { playerNames, language, isMobile, onNewGame } = this.props;\n\n    const controlProps = {\n      onSetGame: this.handleSetGame,\n      onUndo: this.handleUndo,\n      undoDisabled: games.length === 0,\n      onNewGame,\n      isMobile,\n      game,\n      language,\n    };\n\n    const toDisplayCallPlayerToAction = () => {\n      if (!isMobile) {\n        return  <CallPlayerToAction game={game} playerNames={playerNames} isMobile={isMobile}/>\n      }\n    };\n\n    return (\n      <div className=\"score-keeper\">\n        <div className=\"container\">\n          <a id=\"small-logo\" href=\"/\">\n            <img src=\"logo.png\" alt=\"Scrabble score logo\"/>\n          </a>\n          <h1 className=\"title\">Scrabble Score Sheet</h1>\n          {isMobile\n            ? <ScoreGridMobile playerNames={playerNames} game={game} language={language} />\n            : <ScoreGrid playerNames={playerNames} game={game} language={language} />\n          }\n          {!game.areLeftOversSubmitted()\n            ? toDisplayCallPlayerToAction()\n            : (\n              <div className=\"winner\">\n                <h1>{this.renderWinner()}</h1>\n              </div>\n            )\n              }\n          {!game.isGameOver()\n            ? <InGameControls {...controlProps} />\n            : <InGameOverControls {...controlProps} />\n              }\n          <h3>How to use Scrabble Score Online:</h3>\n        <ul>\n          <li>To submit a word, type the word in the input box (the white rectangle above the buttons) then click END TURN</li>\n          <li>When scoring a word with a tile on a prime square (e.g., double-word), click on the coresponding tile in the input box\n              then choose a coresponding option from the window..</li>\n          <li>If you made a mistake, you may use unlimited UNDO.</li>\n\n          <li>\n            When forming more than one word, press ADD WORD after entering each word in the input box.\n          </li>\n          <li>\n            When a player used all seven tiles in a single turn, click BINGO.\n            This adds a 50 points bonus.\n          </li>\n          <li>\n          When using a BLANK tile, click on the coresponding tile and mark it as such.\n          </li>\n          <li>\n            When all the players finished their last turn, click END GAME.\n            Players will be then asked to enter their leftover tiles.\n            Players with leftover tiles get their leftover points deducted from their score.\n            Players with no leftovers collect the leftover points of all other players.\n          </li>\n          <li>\n            To start a new game, click on the logo at the top of the page.\n          </li>\n        </ul>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ScoreKeeper;\n","import ReactGA from 'react-ga';\nimport React from 'react';\nimport GameSettings from '../GameSettings/GameSettings';\nimport ScoreKeeper from './ScoreKeeper';\nimport './App.css';\nimport { logEvent, getPersistedState, clearPersistedState } from '../../logic/util';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleGameStart = this.handleGameStart.bind(this);\n    this.handleWindowSizeChange = this.handleWindowSizeChange.bind(this);\n    this.handlePopState = this.handlePopState.bind(this);\n    this.handleResetGame = this.handleResetGame.bind(this);\n    /*\n      DO NOT CHANGE INITIAL STATE:\n      the initial rendering of the component and the static rendering must be the same\n    */\n    this.state = {\n      playerNames: [],\n      language: 'en',\n      width: 10,\n    };\n  }\n\n  static maybeResumeGame() {\n    if (process.env.NODE_ENV === 'test')\n      return false;\n\n    const shouldResume = window.confirm('You have a game in progress.\\nWould you like to resume it?');\n    logEvent('game-resume', {didResume: shouldResume});\n\n    return shouldResume;\n  }\n\n  componentDidMount() {\n    /* \n     * pushState() allows to modifiy browser history entries;\n     * popstate listens for changes in browser history,like back/front button click;\n     * when history is changed, this.handlePopState function is being fired;\n     * this.handlePopState changes state for ScrabbleScoreKeeper component;\n     * ScrabbleScoreKeeper component rerenders, displaying correct state;\n     */\n\n    const { playerNames } = this.state;\n    window.history.pushState({ playerNames: playerNames }, null) \n    window.addEventListener('popstate', this.handlePopState); \n\n    ReactGA.initialize('UA-144533310-1');\n    ReactGA.pageview(window.location.pathname + window.location.search);\n    this.handleWindowSizeChange();\n\n    const restoredState = getPersistedState();\n    if (restoredState) {\n      if (this.constructor.maybeResumeGame())\n        this.setState({playerNames: restoredState.playerNames});\n      else\n        clearPersistedState();\n    }\n  }\n\n  UNSAFE_componentWillMount() {\n    window.addEventListener('resize', this.handleWindowSizeChange);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleWindowSizeChange);\n    window.removeEventListener('popstate', this.handlePopState);\n  }\n\n  handlePopState(event) {\n   const stateObj = event.state;\n   this.setState({playerNames: stateObj.playerNames})\n  }\n\n  handleWindowSizeChange() {\n    this.setState({ width: window.innerWidth });\n  }\n\n  handleGameStart(playerNames, language) {\n    logEvent('start-game', {'player-names': playerNames, 'language': language});\n    window.history.pushState({ playerNames: playerNames }, null)\n    this.setState({ playerNames, language });\n  }\n\n  handleResetGame() {\n    this.setState({playerNames: []});\n    clearPersistedState();\n  }\n\n  renderGame(isMobile) {\n    const { playerNames, language } = this.state;\n    return playerNames.length === 0\n      ? <GameSettings onGameStart={this.handleGameStart} />\n      : <ScoreKeeper\n          onNewGame={this.handleResetGame}\n          playerNames={playerNames}\n          language={language}\n          isMobile={isMobile}\n        />;\n  }\n\n  render() {\n    const { width } = this.state;\n    const isMobile = width <= 815;\n    return (\n      <div className={`main ${isMobile ? 'mobile' : 'desktop'}`}>\n        {this.renderGame(isMobile)}\n      </div>\n    );\n  }\n}\n\nexport default App;","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost'\n    // [::1] is the IPv6 localhost address.\n    || window.location.hostname === '[::1]'\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    || window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won\"t work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let\"s check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service '\n              + 'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all '\n                  + 'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It\"s the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can\"t reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404\n        || (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport { hydrate, render } from \"react-dom\";\nimport './index.css';\nimport App from './components/ScrabbleScoreKeeper/App';\nimport * as serviceWorker from './serviceWorker';\nimport { logEventInit } from './logic/util';\n\n\n/*This initializes amplitude event tracking instance*/\nlogEventInit()\n\nconst rootElement = document.getElementsByClassName('content')[0];\nif (rootElement.hasChildNodes()) {\n  hydrate(<App/>, rootElement);\n} else {\n  render(<App/>, rootElement);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}